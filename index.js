'use strict;'
const A0={viewport:null,viewport_width:0,pages_container:null,nr_pages:0,lst_pages:null,current_page_idx:0,previous_page_idx:0,client_onResize:null,client_onClick:null,mouse_or_touch:null,PAGE_FREE:0,PAGE_LANDSCAPE:1,PAGE_PORTRAIT:-1,page_before_rotate:-1,page_mode:0,page_rotate_id:0,error_node:null,error_page:null,f28:function(t,s){this.viewport=document.getElementById("AppViewport"),this.pages_container=document.getElementById("AppPagesContainer"),this.lst_pages=Array.from(document.querySelectorAll(".AppPage")),this.nr_pages=this.lst_pages.length,window.hasOwnProperty("cordova")?this.mouse_or_touch="mousedown":this.mouse_or_touch=void 0!==window.ontouchstart?"touchstart":"mousedown",A0.f22(null),this.client_onResize=t||null,this.client_onClick=s||null,window.visualViewport.addEventListener("resize",A0.f22.bind(this))},f22:function(t){this.viewport_width=this.viewport.offsetWidth,this.viewport.style.height=window.visualViewport.height+"px",this.pages_container.style.width=this.nr_pages*this.viewport_width+"px",this.pages_container.style.left=-this.current_page_idx*this.viewport.offsetWidth+"px",this.lst_pages.forEach(t=>t.style.width=this.viewport_width+"px"),this.f9(),this.f12(),null!==this.client_onResize&&this.client_onResize(this.viewport_width,this.viewport.offsetHeight)},f23:function(){return this.viewport_width},f19:function(){return this.viewport.offsetHeight},f24:function(t=""){if("string"==typeof t){var s=0,i=t,h=!1;for(t=this.current_page_idx;s<this.nr_pages;){if(this.lst_pages[s].id===i){t=s,h=!0;break}s++}if(!h)return this.current_page_idx}return this.pages_container.style.left=-t*this.viewport.offsetWidth+"px",this.previous_page_idx=this.current_page_idx,this.current_page_idx=t},f10:function(){return this.current_page_idx},f4:function(){return this.lst_pages[this.current_page_idx].id},f9:function(){this.f24(this.current_page_idx)},f5:function(){this.f24(this.current_page_idx)},f14:function(t,s){this.page_mode=t,this.page_rotate_id=s,this.f12()},f12:function(){return this.show_page=!1,this.page_mode!==this.PAGE_FREE&&(Math.sign(this.viewport.offsetWidth-this.viewport.offsetHeight)!==this.page_mode?(-1===this.page_before_rotate&&(this.page_before_rotate=this.current_page_idx),this.f24(this.page_rotate_id),this.show_page=!0):-1!==this.page_before_rotate&&(this.f24(this.page_before_rotate),this.page_before_rotate=-1,this.show_page=!0)),this.show_page||this.f9(),this.show_page},f0:function(t,s){t.addEventListener(this.mouse_or_touch,this.f25.bind(this,s)),t.addEventListener("contextmenu",this.f11.bind(this))},f6:function(t,s,i){"mousedown"===(s="MOUSE||TOUCH"===s?this.mouse_or_touch:s)&&t.addEventListener("contextmenu",this.f11.bind(this)),t.addEventListener(s,i)},f13:function(t){return t.stopPropagation(),t.preventDefault(),t.target},f25:function(t,s){this.f13(s),null!==this.client_onClick&&this.client_onClick(t,s.target)},f11:function(t){this.f13(t),t.target.click()},f1:function(t){if("serviceWorker"in navigator&&"https:"===window.location.protocol&&void 0===window.cordova){if(this.A1&&!this.A1.f26())return;navigator.serviceWorker.register(t).then(t=>{}).catch(t=>{})}},f7:function(t="AppError"){"string"==typeof t&&(t=document.getElementById(t)),this.error_node=t,this.error_page=g1(t,"section"),window.addEventListener("unhandledrejection",t=>{t.preventDefault(),this.f20("Unhandled rejection",t.reason)}),window.addEventListener("error",t=>{t.preventDefault();t=[t.error.message,t.error.fileName,t.error.lineNumber,this.f2(t.error)].join("<br>");this.f20("Error",t)})},f2:function(t){return t.stack.split(" at ").join("<br>&bull; ")},f20:function(t,s){this.error_node.innerHTML+="<h3>"+t+"</h3>"+s,null!==this.error_page&&this.f24(this.error_page.id)}};class C0{#p97=null;#p93=1/0;#p82=1/0;#p75=1/0;#p69=1/0;#p62=null;constructor(t,s=!1){this.#p97=t,!0===s?this.#p62=this.#P25():s instanceof Node&&(this.#p62=s,this.#p62.id=this.#p97,this.#p62.classList.add("FlexBoxEntity"))}#P25(){var t=document.createElement("div");return t.id=this.#p97,t.classList.add("FlexBoxEntity"),t}M116(){return this.#p97}M51(){return[this.#p93,this.#p82]}M66(){return this.#p62}f23(){return this.#p75}f19(){return this.#p69}M111(){return this.#p93}M97(){return this.#p82}f22(t,s,i,h){this.M52(i,h),this.M98(t,s)}M52(t,s){this.#p93=t,this.#p82=s,null!==this.#p62&&(this.#p62.style.top=t+"px",this.#p62.style.left=s+"px")}M98(t,s){this.#p75=t,this.#p69=s,null!==this.#p62&&(this.#p62.style.width=t+"px",this.#p62.style.height=s+"px")}}class E3 extends C0{#p21=null;#p63=null;#p76=null;#p15=[];#p2=null;constructor(t,s,i,h,e=!1){super(t,e),this.#p21=s,this.#p63=i,this.#p76=h,e&&this.M66().classList.add("FlexBox")}M78(t,s=!0){this.#p15[s?"push":"unshift"](t),null!==this.#p2&&this.#p15.sort(this.#p2),this.M2()}M37(t,s=!0){g2(this.#p15,t),s&&this.M2()}f22(t,s,i,h){super.f22(t,s,i,h),this.M2()}M11(s,i){0<this.#p15.length&&this.#p15.forEach(t=>t.M98(s,i))}M2(){var s,i,h,e;0!==this.#p15.length&&(i=s=0,this.#p15.forEach(t=>{s+=t.f23(),i+=t.f19()}),s!==1/0)&&i!==1/0&&("row"===this.#p21?(h=this.#P6(this.#p63)(!0,"width",s),e=this.#P6(this.#p76)(!1,"height",i)):(e=this.#P6(this.#p63)(!0,"height",i),h=this.#P6(this.#p76)(!1,"width",s)),this.#p15.forEach(t=>{t.M52(e.shift(),h.shift())}))}M27(s){this.#p15.forEach(t=>s(t))}#P6(t){return"center"===t?this.#P1.bind(this):"start"===t?this.#P4.bind(this):"end"===t?this.#P5.bind(this):"evenly"===t?this.#P2.bind(this):"between"===t?this.#P0.bind(this):"around"===t?this.#P3.bind(this):void 0}#P7(t,s){for(var i,h="width"===s?this.M97():this.M111(),e=[],p=0;p<this.#p15.length;++p)t&&0<p&&(i=this.#p15[p-1],h+="width"===s?i.f23():i.f19()),e.push(h);return e}#P4(t,s,i){return this.#P7(t,s)}#P1(t,s,i){for(var h,e=this.#P7(t,s),p=this.#p15.length,n="width"===s?this.f23():this.f19(),r=Math.round((n-i)/2),o=0;o<p;++o)t?e[o]+=r:(h=this.#p15[o],e[o]+=Math.round((n-("width"===s?h.f23():h.f19()))/2));return e}#P5(t,s,i){for(var h,e=this.#P7(t,s),p=this.#p15.length,n="width"===s?this.f23():this.f19(),r=Math.round(n-i),o=0;o<p;++o)t?e[o]+=r:(h=this.#p15[o],e[o]+=n-("width"===s?h.f23():h.f19()));return e}#P2(t,s,i){for(var h=this.#P7(t,s),e=this.#p15.length,t="width"===s?this.f23():this.f19(),p=Math.round((t-i)/(e+1)),n=0;n<e;++n)h[n]+=(n+1)*p;return h}#P0(t,s,i){for(var h=this.#P7(t,s),e=this.#p15.length,t="width"===s?this.f23():this.f19(),p=Math.round((t-i)/(e-1)),n=1;n<e;++n)h[n]+=n*p;return h}#P3(t,s,i){for(var h=this.#P7(t,s),e=this.#p15.length,t="width"===s?this.f23():this.f19(),s=Math.round(i/this.#p15.length),p=Math.round((t-s*(this.#p15.length+1))/this.#p15.length),n=Math.round(s/2+p/2),r=0;r<e;++r)h[r]+=n;for(var o=Math.round((t-i-2*n)/(e-1)),r=1;r<e;++r)h[r]+=r*o;return h}M12(t){this.#p2=t}M67(t){this.#p63=t}}function g13(t){return document.getElementById(t)}function g11(t,s){return(s=s||document).getElementsByTagName(t)[0]}function g12(t,s){return(s=s||document).getElementsByTagName(t)}function g9(t,s=document){return s.querySelector(t)}function g10(t,s=document){return s.querySelectorAll(t)}function g1(t,s){for(s=s.toUpperCase();null!==t&&t.tagName!==s;)t=t.parentNode;return t}function g14(i,h=null){return new Promise((t,s)=>setTimeout(t,i,h))}function g5(s,t){t.forEach(t=>null!==t&&s.appendChild(t))}function QuerySeachString(t,s=null,i=!1){t=new URL(window.location).searchParams.get(t);return null===t?t=s:i&&(t=parseInt(t,10)),t}function g8(t,s){t=getComputedStyle(document.documentElement).getPropertyValue("--"+t.split("--").pop()).trim();return s?parseInt(t,10):t}function g6(t){for(var s=t.length-1;0<s;s--){var i=Math.floor(Math.random()*(s+1)),h=t[s];t[s]=t[i],t[i]=h}}function g7(t){return t.concat()}function g2(t,s){return t.includes(s)?t.splice(t.indexOf(s),1).pop():null}function g3(t,s){return s>=t.length?null:t.splice(s,1).pop()}function g0(t){return g3(t,Math.f21(0,t.length-1))}function g4(t){return t[Math.f21(0,t.length-1)]}A0.A1={},A0.A1.f26=function(){return 0<navigator.maxTouchPoints},A0.A1.f29=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},A0.A1.f3=function(){this.f29()||this.f26()&&(document.fullscreenElement?document.exitFullscreen instanceof Function&&document.exitFullscreen():document.documentElement.requestFullscreen instanceof Function&&document.documentElement.requestFullscreen({navigationUI:"hide"}).catch(t=>{}))},A0.Storage={prefix:null,obj:null},A0.Storage.f28=function(t){this.prefix=t,this.obj=window.localStorage},A0.Storage.f27=function(){},A0.Storage.f18=function(t){this.obj.removeItem(this.prefix+"_"+t)},A0.Storage.f15=function(t,s){this.obj.setItem(this.prefix+"_"+t,JSON.stringify(s))},A0.Storage.f16=function(t){return JSON.parse(this.obj.getItem(this.prefix+"_"+t))},A0.Storage.f8=function(t,s){var i=this.f16(t);if(null===i)this.f15(t,s);else for(var h in i)s.hasOwnProperty(h)&&(s[h]=i[h]);return null!==i},Math.f21=function(t,s){return Math.floor(Math.random()*(s-t+1))+t},Math.f17=function(t,s){return t+Math.random()*(s-t)};class E5 extends C0{#p97=null;#p83=-1;#p77=-1;#p78=-1;#p64=!0;#p53=!1;#p1=!0;#p54=null;#p70=null;#p71=null;#p72=null;#p65=null;#p31=null;#p73=null;#p84=null;#p74=!1;constructor(t,s,i){super("Card_"+t,!0),this.#p97=t,this.#p83=s.id,this.#p77=i.nr,this.#p78=s.color,this.M88(i.symbol,i.nr,s.symbol),this.M13(this.#p1)}M20(){return this.#p70}M13(t){(this.#p1=t)&&(this.M100()||this.M117())?this.#p31.classList.remove("Hidden"):this.#p31.classList.add("Hidden")}M88(t,s,i){this.#p70=document.createElement("div"),this.#p70.classList.add("CardBody"),this.#p70.classList.add("Clickable"),this.#p71=document.createElement("div"),this.#p71.classList.add("CardFace"),this.#p70.appendChild(this.#p71),this.#p72=document.createElement("div"),this.#p72.classList.add("CardBack"),this.#p70.appendChild(this.#p72),this.#p65=document.createElement("p"),this.#p65.classList.add("CardValue"),this.#p65.classList.add("CardValue"+this.#p78);var h=document.createElement("span"),t=(h.innerHTML=t,this.#p65.appendChild(h),this.#p71.appendChild(this.#p65),this.#p31=document.createElement("span"),(this.M100()||this.M117())&&(this.#p31.innerHTML=s),this.#p65.appendChild(this.#p31),this.#p73=document.createElement("p"),this.#p73.innerHTML=i,this.#p73.classList.add("CardSuit"),this.#p73.classList.add("CardSuit"+this.#p78),this.#p71.appendChild(this.#p73),this.#p64||this.#p70.classList.add("FaceDown"),this.M100()?this.#p71.classList.add("CardRoyal"):this.M101()?this.#p71.classList.add("CardJoker"):this.M117()&&this.#p71.classList.add("CardAce"),this.M66());t.classList.add("Card"),t.classList.add("CardSmooth"),t.classList.add("CardHidden"),t.appendChild(this.#p70)}M89(){return this.#p77}M99(){return this.#p83}M90(){return this.#p78}M98(t,s){super.M98(t,s),this.#p65.style.fontSize=Math.round(.3*t)+"px",this.#p65.children.length&&(this.#p65.children[1].style.fontSize=Math.round(.2*t)+"px"),this.#p73.style.fontSize=Math.round(.4*t)+"px"}M79(t){this.#p64=t,this.#p70.classList[t?"remove":"add"]("FaceDown")}M53(t){this.#p53=t,this.#p70.classList[t?"add":"remove"]("CardSelected")}M21(){return this.M53(!this.#p53),this.#p53}M54(t){this.#p54=t}M119(t){return this.#p54===t}M55(){return this.#p54}M100(){return[k23,k16,k24].includes(this.#p77)}M68(){return this.M100()}M101(){return this.#p77===k15}M117(){return this.#p77===k28}M91(){return this.#p64}M69(){return this.#p53}M80(t){this.M66().classList[t?"add":"remove"]("CardHidden")}M81(t){this.M66().classList[t?"add":"remove"]("CardSmooth")}M82(t){this.M66().style.zIndex=t}M38(){return this.M100()||this.M117()}M92(){return"#"+this.#p97+"="+this.#p77+"/"+k22[this.#p83]}M102(t){this.#p84=t}M103(){return this.#p84}M104(){return this.#p77===k16}M112(t){return this.#p83===t}M14(){return this.M104()&&this.M112(k14)}M83(t){return this.#p74=t,this.#p65.classList[t?"add":"remove"]("Marked"),t}}class C2{#p55=null;#p36=null;#p85=null;#p86=null;#p37=null;#p38=null;#p94=null;#p39=null;#p87=null;#p79=null;#p88=!1;#p40=!1;#p32=!1;#p22=!1;#p41=!0;#p56=0;#p42=1;#p23=1;#p33=1;#p5=null;#p24=null;#p43=0;#p57=null;#p44=null;#p16=null;constructor(){this.clicked_card=null,A0.f28(this.#P33.bind(this),this.#P34.bind(this)),A0.f7(),A0.f14(A0.PAGE_LANDSCAPE,"Rotate"),A0.Storage.f28("LonelyHearts"),this.#p55=g13("GameViewport"),this.#p36=new C1(k26),this.#p85=new C4(g13("MenuPannel"),g13("MenuIcon")),this.#p86=new C3(k27),this.#p37=new E2,this.#p94=new E7(k31,this.onBotPlayCard.bind(this),this.onBotFlipQOS.bind(this)),this.#p79=new E4(g13("Stats")),this.#p44=new C0("StatsBot",g13("StatsBot")),this.#p16=new C0("StatsPlayer",g13("StatsPlayer")),this.#p38=this.#p37.M65(),this.#p5=new E0("DiscardPlayer"),this.#p24=new E0("DiscardBot"),this.#p39=new E1("TrickRow",k4,!1),this.#p87=new E6(2,k10),g13("Play").appendChild(this.#p36.M66()),this.#p55.appendChild(this.#p39.M66()),g5(this.#p55,this.#p37.M59()),g5(this.#p55,this.#p94.M59()),g5(this.#p55,this.#p87.M59()),g5(this.#p55,this.#p5.M59()),g5(this.#p55,this.#p24.M59()),A0.f6(window,"contextmenu",A0.f13.bind(A0)),A0.f0(g13("HomeCard"),null),A0.f0(g13("MenuIcon"),null),this.#p85.M59().forEach(t=>A0.f0(t,null)),A0.f0(this.#p39.M66(),this.#p39),this.#p39.M66().classList.add("Clickable"),A0.A1.f26()?A0.f0(g13("btnFullScreen"),null):g13("btnFullScreen").style.display="none",this.#p85.M121(),this.#P33(0,0),this.#P31(),window.DEV&&this.#P35(),this.M58(),window.setTimeout(()=>{A0.f12(),g13("AppViewport").classList.remove("AppInit")},62.5),g13("UserAgent").innerHTML=navigator.userAgent}#P35(){window.DEV&&(this.Deck=this.#p86,this.Messenger=this.#p36,this.Hand=this.#p87,this.Bot=this.#p94,this.TrickRow=this.#p39,this.DrawPile=this.#p38,this.Stats=this.#p79,this.DiscardPlayer=this.#p5,this.StatsBot=this.#p44,this.#P15("Play"))}#P31(){for(var t;null!==(t=this.#p86.M109());)t.M13(!0),t.M14()&&(this.#p57=t,this.M40()),this.#p55.appendChild(t.M66()),A0.f0(t.M20(),t),t.M80(!1),this.#p24.M105(t);for(;!this.#p24.M106();)this.#p38.M105(this.#p24.M25())}#P33(t,s){var i=this.#p55.offsetTop,h=window.visualViewport.width-2*i,e=Math.round(h/10),p=Math.round(this.#p55.offsetHeight/5),[i,n]=this.#P22(e,p,i),r=(this.#p86.M47(i,n),7*e),h=(9*i<r&&(r=9*i),Math.ceil((h-r)/2)),o=(2*i<h&&(h=Math.round(2*i)),this.#p55.style.width=r+2*h+"px",this.#p36.f22(r,Math.round(n/2),0,this.#p55.offsetLeft+h),this.#p55.offsetHeight-3*p),i=(this.#p94.f22(r,o,0,h,n),this.#p37.f22(e,p,o,h+r/2-e/2,i,n),this.#p5.f22(e,p,o,h),this.#p5.M24(i,n),this.#p24.f22(e,p,o,h+r-e),this.#p24.M24(i,n),this.#p39.f22(r-2*e,p,o,h+e),Math.floor(.12*h)+"px");this.#p16.M66().style.fontSize=i,this.#p44.M66().style.fontSize=i,this.#p16.f22(h,3*p,o,0),this.#p44.f22(h,3*p,o,h+r),this.#p87.f22(r,2*p,o+=p,h,n)}#P22(t,s,i){var i=+i,t=t-i,h=Math.round(t*k1);return s-i<h&&(h=s-i,t=Math.round(h/k1)),[t,h]}#P12(t,s,i){if(0===s)return Promise.resolve(null);for(var h=[],e=k0*t,p=0;0<s--;)h.push(g14(p).then(t=>{i()})),p+=e;return h.push(g14(p-e+k0)),Promise.all(h)}#P10(s,i,t){return this.#P12(.02,Math.min(t,s.M70()),t=>{i.M105(s.M25())})}#P8(){this.#p86.M62(t=>t.M81(!1)),setTimeout(t=>this.#p86.M62(t=>t.M81(!0)),0)}#P23(){this.#P14(this.#p86.M6(),this.#p38),setTimeout(()=>this.#p86.M62(t=>{t.M81(!0)}),0)}#P14(t,s){for(var i;0<t.length;)(i=t.pop()).M55().M71(i),s.M105(i)}#P37(t){this.#p36.M63(t)}#P34(t,s){return this.#p85.IsIcon(s)?this.#P15(s.id.split("_").pop()):"HomeCard"===s.id?this.#P15("Play"):"btnFullScreen"===s.id?A0.A1.f3():this.#p88?void 0:t instanceof E5&&t.M119(this.#p38)?this.#P37("Click the<img src='icons/play-button-svgrepo-com.svg'>icon to start a game."):void(this.#p41||(t instanceof E5?this.#P26(t):t instanceof E0?this.#P16(t):t===this.#p39&&this.onClickTrickRow()))}#P15(t){"MenuIcon"===t?this.#p85.M115():"Play"===t?"Play"===A0.f4()?this.#P36():(this.#p85.M95(!0),this.#p85.M120(),A0.f24("Play")):"Home"===t?(this.#p85.M121(),this.#p85.M95(!1),A0.f24("Home")):"Stats"===t?A0.f24("Stats"):A0.f24(t)}#P26(t){if(this.clicked_card=t,!this.#p88)if(t.M91())if(t.M119(this.#p39))this.onClickTrickRow();else{if(t.M55().M113())return 0<this.#p43?this.M41(t):void(this.#p40?this.#p32||!(t.M99()===k13||this.#p23&&t.M14())||this.#p87.M86()?this.M39(t):(t.M99()===k13&&this.#P37("You cannot play hearts at the moment."),t.M14()&&this.#P37("You cannot play the Queen of Spades at the moment.")):this.#P37("Not your turn."));this.#P37("Click the Trick Row to make the bot play a card.")}else this.#P37("That card is face down.")}#P16(t){this.#p88}#P36(){this.#p88||(this.#p88=!0,this.#p40=!1,this.#p32=!1,this.#p22=!1,this.#p41=!1,this.#p43=0,this.#p38.M18(!0),this.#p36.M121(),this.#p85.M121(),this.#p79.M118(),this.#p94.M118(this.#p24),this.#p87.M118(this.#p24),this.#P8(),this.#p86.M118(),this.#p86.M108(),this.#P23(),this.#p5.M94(2.5*k0),this.#p24.M94(2.5*k0),this.#P10(this.#p38,this.#p87,k3).then(()=>{this.#p23&&this.xCleanHand(),this.#p87.M85(),this.#p43=k6,0===this.#p43?this.M42():(this.#p36.M64("Hand swap "+(k6-this.#p43+1)+"/"+k6+" &raquo; Click a card from your hand to redraw."),this.#p88=!1)}))}M39(t){this.#p88=!0,this.#p87.M71(t),this.#p39.M105(t),this.#p40=!1,this.#p87.M85(),this.#p56?g14(k0).then(()=>this.M56()):this.#p88=!1}onBotFlipQOS(t){}onBotPlayCard(t){this.#p32||t.M99()!==k13||(this.#p32=!0,this.#P37("Hearts are out!")),this.#p94.M71(t),this.#p39.M105(t),this.#p39.M70()<k4?this.#p56?g14(k0).then(()=>this.M56()):this.#p88=!1:(this.#p22=!0,this.#p88=!1)}M56(){this.#p22||this.#p40||this.#p94.M96(this.#p39.M93())}M28(){this.#p41=this.#p79.M31(this.#p39.M93());const s=this.#p79.M8();this.#P12(.5,k4,()=>{var t=this.#p39.M61();(s?this.#p5:this.#p24).M105(t)}).then(()=>{var t,s;this.#p22=!1,this.#p40=!0,this.#p41&&(s="Game over &raquo You "+((t=this.#p79.M110()).win?"win":"lose"),s+=" by "+t.score+" to "+t.bot+".",this.#p36.M64(s),this.#p79.M33())})}onClickTrickRow(){if(!this.#p22)return this.#p40?this.#P37("Play a card from your hand."):this.#p56?this.#P37("Trick has not ended."):this.M56();this.M28()}M57(t){this.#p56=t}M58(){this.#p56=Boolean(QuerySeachString("autoplay",this.#p56,!0)),this.#p42=Boolean(QuerySeachString("winhearts",this.#p42,!0)),this.#p23=Boolean(QuerySeachString("qos",this.#p23,!0)),this.#p33=Boolean(QuerySeachString("onsuitmax",this.#p33,!0)),g13("option_autoplay_"+(this.#p56?1:0)).checked=!0,g13("option_winhearts_"+(this.#p42?1:0)).checked=!0,g13("option_qos_"+(this.#p23?1:0)).checked=!0,g13("option_onsuitmax_"+(this.#p33?1:0)).checked=!0,Array.from(g12("input")).forEach(t=>{t.addEventListener("change",this.onChangeOption.bind(this))}),this.#p94.M48(this.#p42),this.#p94.M32(this.#p23),this.#p94.M49(this.#p23),this.#p79.M32(this.#p23),this.#p87.M32(this.#p23)}onChangeOption(t){var t=t.target.id.split("_"),s=t[1],t=Boolean(+t[2]);"autoplay"===s?(this.#p56=t,!this.#p56||this.#p41||this.#p22||this.M56()):"winhearts"===s?(this.#p42=t,this.#p94.M48(this.#p42)):"qos"===s?(this.#p23=t,this.#p94.M32(this.#p23),this.#p79.M32(this.#p23),this.#p87.M32(this.#p23),this.M40()):"onsuitmax"===s&&(this.#p33=t,this.#p94.M49(this.#p33))}M40(){this.#p57 instanceof E5&&this.#p57.M83(this.#p23)}M41(t){this.busy=!0,--this.#p43,this.#p36.M121(),this.xSwapHandCard(t).then(()=>{this.#p23&&this.xCleanHand(),0===this.#p43?this.M42():(this.#p36.M64("Hand swap "+(k6-this.#p43+1)+"/"+k6+" &raquo; Click a card from your hand to redraw."),this.busy=!1)})}xSwapHandCard(t){return this.#p87.M71(t),this.#p38.M105(t),g14(k0).then(()=>(this.#p38.M44(),this.#P10(this.#p38,this.#p87,1))).then(()=>{this.#p87.M85()})}async xCleanHand(){for(var t;null!==(t=this.#p87.M10())&&await this.xSwapHandCard(t),null!==t;);return t}M42(){this.#p88=!0,this.#P10(this.#p38,this.#p94,k5).then(()=>{this.#p38.M18(!1),this.#p79.M74(),this.#p40=!0,this.#p88=!1})}}class E0 extends E3{#p97=null;#p45=[];#p80=0;#p8=!1;#p89=null;#p46=null;constructor(t){super(t,"column","center","center",!0),this.#p97=t,this.#p89=new C0(this.#p97+"_Base",!0),this.M78(this.#p89);t=this.#p89.M66();t.classList.add("CardPileBase"),t.classList.add("Clickable"),this.#p46=document.createElement("p"),this.#p46.classList.add("Hidden"),t.appendChild(this.#p46)}M22(){return this.#p89.M66()}M59(){return[this.#p89.M66(),this.M66()]}M93(){return g7(this.#p45)}M23(t){this.#p8=t,0<this.#p45.length&&this.#p45[this.#p45.length-1].M79(t)}M24(t,s){this.M11(t,s),this.M2(),this.#P13(),this.#p46.style.fontSize=Math.round(.09*t)+"px"}#P13(){const[s,i]=this.#p89.M51();this.#p45.forEach(t=>t.M52(s,i))}M29(){var s=1;this.#p45.forEach(t=>t.M82(s++))}M94(t){this.#p80=t}M43(t){this.M105(t,!0)}M15(t){this.M105(t,!1)}M105(t,s=!0){var i,h;t instanceof E5&&(this.#p45.includes(t)||(this.#p45[s?"push":"unshift"](t),this.#p46.innerHTML=this.#p45.length,[i,h]=this.#p89.M51(),t.M53(!1),t.M79(!1),t.M52(i,h),s?t.M82(100+this.#p45.length):t.M82(0),t.M54(this),g14(this.#p80).then(t=>{this.M29(),this.M5()})))}M16(){return this.#p89.M51()}M25(){var t;return 0===this.#p45.length?null:((t=this.#p45.pop()).M82(100+this.#p45.length),t.M80(!1),this.M5(),this.#p46.innerHTML=this.#p45.length,t)}M5(){var t=this.#p45.length-1;if(0<=t){var s=this.#p45[t];for(s.M80(!1),s.M79(this.#p8),--t;0<=t;--t)(s=this.#p45[t]).M80(!0),s.M79(!1)}}M106(){return 0===this.#p45.length}M70(){return this.#p45.length}M71(t){if(this.#p45.includes(t))return g2(this.#p45,t),t.M80(!1),this.#p46.innerHTML=this.#p45.length,this.M5(),t}M60(t){this.#p46.classList[t?"remove":"add"]("Hidden"),t&&(this.#p46.innerHTML=this.#p45.length)}M17(t){for(var s;0<this.#p45.length;)s=this.#p45[0],this.M71(s),t.M105(s)}M20(){return this.#p89.M66()}M72(t){for(;0<this.#p45.length;)t.M105(this.M25())}M44(){1<this.#p45.length&&(g6(this.#p45),this.M29(),this.M5())}M84(t){this.M66().classList[t?"add":"remove"]("Highlight")}M18(t){this.#p89.M66().style.visibility=t?"":"hidden"}}class E1 extends E3{#p97=null;#p47=0;#p66=!1;#p45=[];#p0=!0;constructor(t,s,i){super(t,"row","evenly","center",!0),this.#p97=t,this.#p66=i,this.#p47=s}f22(t,s,i,h){super.f22(t,s,i,h)}M0(t){this.#p0=t}M105(t){this.#p45.length===this.#p47||this.#p45.includes(t)||(t.M54(this),t.M79(!0),t.M82(100+this.#p45.length),this.#p45.push(t),this.M78(t,!0))}M71(t){if(this.#p45.includes(t))return g2(this.#p45,t),this.M37(t,this.#p0),t}M72(t){for(var s;0<this.#p45.length;)s=this.#p45[0],this.M71(s),t.M105(s)}M9(t){return this.#p45.filter(t)}M70(){return this.#p45.length}M93(){return g7(this.#p45)}M113(){return this.#p66}M106(){return 0===this.#p45.length}M114(){return this.#p45.length===this.#p47}M107(t){return this.#p45.includes(t)}M61(){if(0!==this.#p45.length)return this.M71(this.#p45[this.#p45.length-1])}M10(){var s=null;return this.#p45.forEach(t=>{t.M14()&&(s=t)}),s}}class C3{#p45=[];#p9=[];#p48=0;#p25=0;constructor(t,s=null){this.#p48=t,this.#P32(),null!==s&&this.DiscardCards(s)}#P32(){for(var t,s,i,h=0,e=[],p=0;p<4;++p)for(i=this.M46(p),e.includes(i)||e.push(i),s=2;s<=14;++s)t=new E5(h++,{id:p,symbol:this.M30(p),color:i},{nr:s,symbol:this.M26(s)}),this.#p45.push(t),this.#p25+=1;for(var n=0,r=1;r<=this.#p48;++r)t=new E5(h++,{id:k21,symbol:this.M30(k21),color:e[n]},{nr:k15,symbol:this.M26(k15)}),this.#p45.push(t),this.#p25+=1,n=(1+n)%e.length}M45(t){if(!(0<this.#p9.length))return t=this.#p45.filter(t),this.#p25-=t.length,t.forEach(t=>{g2(this.#p45,t)}),t}f22(s,i){this.M62(t=>t.M98(s,i))}M62(t){this.#p45.forEach(t),this.#p9.forEach(t)}M108(){g6(this.#p45)}M109(){var t;return 0===this.#p45.length?null:(t=g0(this.#p45),this.#p9.push(t),t)}M118(){for(;this.#p9.length;)this.#p45.push(this.#p9.pop())}M30(s){return k30.filter(t=>t.id===s).pop().symbol}M46(s){return k30.filter(t=>t.id===s).pop().color}M26(s){return s===k15||11<=s&&s<=13||s===k28?k25.filter(t=>t.value===s).pop().symbol:s}M47(s,i){this.M62(t=>t.M98(s,i))}M9(t){t=this.#p45.filter(t);return t.forEach(t=>{g2(this.#p45,t),this.#p9.push(t)}),t}M70(){return this.#p45.length}M19(){return this.#p25}M6(){for(var t=[];0<this.#p45.length;){var s=this.#p45.pop();this.#p9.push(s),t.push(s)}return t}}class C4{#p62=null;#p90=null;#lst_elements=null;constructor(t,s){this.#p62=t,this.#p90=s,this.#lst_elements=Array.from(t.children),this.#p90.classList.add("Clickable"),this.#lst_elements.forEach(t=>t.classList.add("Clickable"))}M59(){return g7(this.#lst_elements)}M120(){this.#p62.style.right=0}M121(){this.#p62.style.right=-1.1*this.#p62.offsetWidth+"px"}M115(){"0px"===this.#p62.style.right?this.M121():this.M120()}M95(t=!0){this.#p90.classList[t?"remove":"add"]("Hidden")}IsIcon(t){return t.id.startsWith("Menu")}M73(t){g13("Menu_Play").classList[t?"remove":"add"]("Hidden")}}class C1{#p62=null;#p95=null;#p49=0;#p81=0;constructor(t){this.#p62=document.createElement("div"),this.#p62.id="Messenger",this.#p95=document.createElement("p"),this.#p62.appendChild(this.#p95),this.#p49=t<1e3?1e3*t:t}M66(){return this.#p62}f22(t,s,i,h){this.#p62.style.width=t+"px",this.#p62.style.height=s+"px",this.#p62.style.left=h+"px",this.#p95.style.fontSize=Math.min(Math.round(.25*s),17)+"px",this.M121()}M121(){this.#p62.style.top=-1.1*this.#p62.offsetHeight+"px"}M7(t,s){0<this.#p49&&this.M63("<span>"+t+"</span>: "+s)}M63(t){0<this.#p49&&(clearTimeout(this.#p81),this.#p81=setTimeout(this.M121.bind(this),this.#p49),this.#p95.innerHTML=t,this.#p62.style.top=0)}M64(t){clearTimeout(this.#p81),this.#p95.innerHTML=t,this.#p62.style.top=0}}class E2 extends E3{#p97=null;#p91=null;constructor(t){super("PilesRow_"+t,"column","center","center",!0),this.#p97=t,this.#p91=new E0(t+"_Draw"),this.M78(this.#p91)}f22(t,s,i,h,e,p){super.f22(t,s,i,h);s=Math.round(1.2*p);this.M11(t,s),this.M2(),this.M27(t=>{t instanceof E0&&t.M24(e,p)})}M65(){return this.#p91}M59(){return[this.M66(),this.#p91.M66(),this.#p91.M22()]}}class E4 extends C0{#p58=0;#p3=0;#p6=0;#p10=0;#p7=!1;#p17=0;#p11=0;#p26=0;#p34=0;#p27=!1;#p50=0;#p92={win:null,score:-1,bot:-1};#p4=!1;#p23=!0;#p67=10;#p96="stats";#p84={games_finished:0,games_won:0,lst_last_scores:[],lst_best_scores:[]};constructor(t){super("Stats",t),["latest","best"].forEach(t=>{for(var s,i=g13("lst_"+t+"_scores"),h=0;h<this.#p67;++h)s=document.createElement("p"),i.appendChild(s),s.id=t+"_"+h}),this.#P27(),this.#P18(1/0)}M118(){this.#p58=0,this.#p3=0,this.#p6=0,this.#p10=0,this.#p7=!1,this.#p17=0,this.#p11=0,this.#p26=0,this.#p34=0,this.#p27=!1,this.#p50=0,this.#P28()}M74(){this.#p58+=1}#P28(t=0){g13("txt_player_winClean").innerHTML=this.#p3,g13("txt_player_winAll").innerHTML=this.#p6,g13("txt_player_hearts").innerHTML=this.#p10,g13("txt_bot_winClean").innerHTML=this.#p11,g13("txt_bot_winAll").innerHTML=this.#p26,g13("txt_bot_hearts").innerHTML=this.#p34,g13("txt_player_score").innerHTML=this.#p17,g13("txt_bot_score").innerHTML=this.#p50,this.#P20(t)}#P20(t=0){var s;0!==t&&((s=g13(this.#p4?"xPlayer":"xBot")).classList[0<t?"remove":"add"]("Penalty"),s.classList.add("Visible"),s.innerHTML=(0<t?"<small>+</small>":"")+t,setTimeout(()=>{s.classList.remove("Visible")},k2))}#P29(t,s){var i=0;return this.#p23?(0!==t||s?s&&(i=k12):i=k7,0<t&&(i+=t*k8)):i=0===t?k7:t*k8,i}M31(t){t.forEach(t=>{});var s=t.filter(t=>t.M99()===k13).length,i=this.#P9(t),h=t[0],e=h.M99(),e=this.#P30(e,t),t=(this.#p4=e===h,this.#p4?(this.#p6+=1,this.#p23?0!==s||i||(this.#p3+=1):0===s&&(this.#p3+=1),i&&(this.#p7=!0),this.#p10+=s):(this.#p26+=1,this.#p23?0!==s||i||(this.#p11+=1):0===s&&(this.#p11+=1),i&&(this.#p27=!0),this.#p34+=s),this.#P29(s,i)),e=(this.#p4?this.#p17+=t:this.#p50+=t,this.#P28(t),!1);return this.#p58<k18?this.#p58+=1:(e=!0,this.#p17=this.#P24(this.#p3,this.#p6,this.#p10,this.#p7),this.#p50=this.#P24(this.#p11,this.#p26,this.#p34,this.#p27),this.#p92.win=this.#p17>=this.#p50,this.#p92.score=this.#p17,this.#p92.bot=this.#p50,g13("txt_player_score").innerHTML=this.#p17,g13("txt_bot_score").innerHTML=this.#p50),e}#P24(t,s,i,h){var e=0;return this.#p23?i===k19&&h?e=k7*s+k9:(e=k7*t,e+=i*k8,h&&(e+=k12)):i===k19?e=k7*s+k9:(e=k7*t,e+=i*k8),e}M8(){return this.#p4}M110(){return this.#p92}#P30(i,t){var h=0,e=null;return t.forEach(t=>{var s;t.M99()===i&&(s=t.M89(),h<s)&&(h=s,e=t)}),e}#P9(t){var s=!1;return t.forEach(t=>{t.M14()&&(s=!0)}),s}M32(t){this.#p23=t}#P27(){var t=this.#P17();A0.Storage.f8(this.#p96,t)&&this.#P11(t)}#P17(){var t,s={};for(t in this.#p84)s[t]=this.#p84[t];return s}#P21(){A0.Storage.f15(this.#p96,this.#P17())}#P11(t){for(var s in t)this.#p84.hasOwnProperty(s)&&(this.#p84[s]=t[s])}#P18(t){g13("txt_stats_finished").innerHTML=this.#p84.games_finished,g13("txt_stats_won").innerHTML=this.#p84.games_won,0<this.#p84.games_finished?g13("txt_stats_winratio").innerHTML=Math.round(this.#p84.games_won/this.#p84.games_finished*100)+"%":g13("txt_stats_winratio").innerHTML="0%",this.#P19("latest",this.#p84.lst_last_scores,t),this.#P19("best",this.#p84.lst_best_scores,t)}#P19(t,s,i){for(var h,e=g13("lst_"+t+"_scores").children,p=!1,n=0;n<s.length;n++)(h=e[n]).innerHTML=s[n],h.classList.remove("win"),h.classList.remove("loose"),h.classList.add(0<=s[n]?"win":"loose"),i===1/0||p||s[n]!==i?h.classList.remove("current"):(p=!0,h.classList.add("current"))}M33(){this.#p84.games_finished+=1,this.#p92.win&&(this.#p84.games_won+=1);var t=this.#p92.score-this.#p92.bot;this.#p84.lst_last_scores.unshift(t),this.#p84.lst_last_scores=this.#p84.lst_last_scores.splice(0,this.#p67),this.#p84.lst_best_scores.push(t),this.#p84.lst_best_scores.sort((t,s)=>s-t),this.#p84.lst_best_scores=this.#p84.lst_best_scores.splice(0,this.#p67),this.#P18(t),this.#P21()}}class E6 extends C0{#p68=0;#p59=null;#p12=0;#p51=0;#p60=0;#p23=!0;constructor(t,s){super("Hand",!0),this.#p68=t,this.#p12=s,this.#p59=[];for(var i,h=0;h<t;++h)i=new E1("HandRow_"+h,s,!0),this.#p59.push(i)}M59(){for(var t=[this.M66()],s=0;s<this.#p68;++s)t.push(this.#p59[s].M66());return t}f22(t,s,i,h,e){for(var p=Math.floor(s/this.#p68),n=0;n<this.#p68;++n)this.#p59[n].f22(t,p,i,h),i+=p;super.f22(t,s,i,h)}M105(t){t.M66().style.transform="rotate(0deg)",t.M99()===k13&&(this.#p51+=1),this.#p60+=1;for(var s=0;this.#p59[s].M114();)s+=1;this.#p59[s].M105(t)}M118(t){this.#p51=0;for(var s=this.#p60=0;s<this.#p68;++s)this.#p59[s].M72(t)}M71(t){for(var s,i=0;i<this.#p68;++i)if((s=this.#p59[i]).M107(t))return s.M71(t),t.M99()===k13&&--this.#p51,--this.#p60,t;return null}M85(){for(var s=[],i=0;i<this.#p68;++i)for(h=this.#p59[i];!h.M106();)s.push(h.M61());s.sort((t,s)=>{var i=t.M99(),h=s.M99();return i!==h?i-h:t.M89()-s.M89()});var h=this.#p59[0],i=0;s.forEach(t=>{(h=i===k10?this.#p59[1]:h).M105(s[i++])})}M86(){return this.#p23?this.#p60===this.#p51||this.#p60-1===this.#p51&&this.M10():this.#p60===this.#p51}M10(){for(var t,s=0;s<this.#p68;++s)if(null!==(t=this.#p59[s].M10()))return t;return null}M32(t){this.#p23=t}}class E7 extends C0{#p68=0;#p59=null;#p28=0;#p18=0;#p13=0;#p29=null;#p14=null;#p19=null;#p20=null;#p30=null;#p35=!0;#p52=!0;#p61=null;#p23=!0;constructor(t,s,i){super("Bot",!0),this.#p68=t,this.#p20=s,this.#p30=i,this.#p59=[];for(var h,e=0;e<t;++e)(h=new E1("BotRow_"+e,k10,!1)).M67(e%2==0?"between":"around"),h.M0(!1),this.#p59.push(h)}M48(t){this.#p35=t}M49(t){this.#p52=t}M59(){var s=[this.M66()];return this.#p59.forEach(t=>{s.push(t.M66())}),s}f22(s,t,i,h,e){super.f22(s,t,i,h);const p=Math.round((t-this.#p68*e)/(this.#p68-1));var n=i;this.#p59.forEach(t=>{t.f22(s,e,n,h),n+=e+p})}M34(t){this.#p19.push(t),t.M14()&&(this.#p61=t),t.M66().style.transform="rotate(0deg)"}M105(t){this.#p59[this.#p28].M105(t),t.M79(this.#p28===this.#p68-1),t.M82(this.#p28),t.M102({row:this.#p28,column:this.#p18}),t.M91()?this.M34(t):t.M66().style.transform="rotate("+Math.f17(-3,3)+"deg)",this.#p14.push(t),this.#p18+=1,this.#p18===this.#p13&&(this.#p28+=1,this.#p28<this.#p68)&&(this.#p18=0,this.#p13=k10,this.#p28%2!=0&&--this.#p13,this.#p14=[],this.#p29.push(this.#p14))}M118(s){this.#p28=0,this.#p18=0,this.#p13=k10,this.#p14=[],this.#p29=[],this.#p29.push(this.#p14),this.#p19=[],this.#p61=null,this.#p59.forEach(t=>t.M72(s))}M96(t){var s,i,h;return 0===t.length||t.length===k4?null:(s=t[0].M99(),h=null,h=0<(i=this.M3(s)).length?this.M4(t,s,i):this.M1(),void this.#p20(h))}M3(s){return this.#p19.filter(t=>t.M99()===s)}M4(t,s,i){var h;return s!==k13&&!this.M35(t)||this.#p35?(t=this.M75(s,t),h=this.M75(s,i),this.#p52||h.M89()>t.M89()?h:this.M77(i)):this.M76(s,i)}M35(t){return null!==this.M75(k13,t)}M75(i,t){var h=0,e=null;return t.forEach(t=>{var s;t.M99()===i&&(s=t.M89(),h<s)&&(h=s,e=t)}),e}M76(i,t){var h=1/0,e=null;return t.forEach(t=>{var s;t.M99()===i&&(s=t.M89())<h&&(h=s,e=t)}),e}M77(t){var i=1/0,h=null;return t.forEach(t=>{var s=t.M89();s<i&&(i=s,h=t)}),h}M1(){if(this.#p23&&this.M10())return this.#p61;var t=this.M75(k13,this.#p19);if(null!==t)return t;const s=this.M77(this.#p19).M89();t=this.#p19.filter(t=>t.M89()===s);return 1===t.length?t[0]:t[Math.f21(0,t.length-1)]}M71(t){t.M14()&&(this.#p61=null),g2(this.#p19,t);var s=t.M103();this.#p29[s.row][s.column]=null,this.#p59[s.row].M71(t),t.M66().style.transform="rotate(0deg)",0<s.row&&this.M87(s.row,s.column)}M87(t,s){var i=t-1;this.M50(i,s),t%2!=0?this.M50(i,s+1):this.M50(i,s-1)}M50(t,s){var i;s<0||s>=(i=this.#p29[t]).length||null!==(i=i[s])&&(t%2==0?this.M36(t+1,s)&&this.M36(t+1,s-1):this.M36(t+1,s)&&this.M36(t+1,s+1))&&(i.M79(!0),i.M66().style.transform="rotate(0deg)",this.M34(i),i.M14())&&this.#p30(i)}M36(t,s){return s<0||s>=(t=this.#p29[t]).length||null===t[s]}M10(){return null!==this.#p61}M32(t){this.#p23=t}#P9(t){var s=null;return t.forEach(t=>{t.M14()&&(s=t)}),s}}const k1=16/11,k26=5,k27=0,k0=g8("CARD_TRANSLATE_TIME",!0),k2=10/3*1e3,k31=6,k10=7,k4=4,k3=13,k18=13,k5=52-k3,k19=13,k6=2,k7=4,k8=-1,k12=-13,k9=13,k13=0,k14=1,k11=2,k20=3,k21=4,k22=["hearts","spades","diamonds","clubs","joker"],k15=0,k23=11,k16=12,k24=13,k28=14,k29="Red",k17="Black",k30=[{id:k13,symbol:"&hearts;",color:k29},{id:k14,symbol:"&spades;",color:k17},{id:k11,symbol:"&diams;",color:k29},{id:k20,symbol:"&clubs;",color:k17},{id:k21,symbol:"",color:""}],k25=[{value:k23,symbol:"J"},{value:k16,symbol:"Q"},{value:k24,symbol:"K"},{value:k28,symbol:"A"},{value:k15,symbol:"&#x2605;"}];window.addEventListener("load",()=>{new C2});